!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("htmxServerless",[],t):"object"==typeof exports?exports.htmxServerless=t():e.htmxServerless=t()}(window,(()=>(()=>{"use strict";var e={967:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.handlers=new Map,this.init(null===window||void 0===window?void 0:window.htmx)}init(e){null==e||e.defineExtension("serverless",{onEvent:this.onEvent.bind(this),transformResponse:this.transformResponse.bind(this)})}onEvent(e,t){var n,s,r,o,i;const l=null===(r=null===(s=null===(n=null==t?void 0:t.detail)||void 0===n?void 0:n.elt)||void 0===s?void 0:s["htmx-internal-data"])||void 0===r?void 0:r.path,d=null===(i=null===(o=t.detail)||void 0===o?void 0:o.requestConfig)||void 0===i?void 0:i.parameters;if("htmx:beforeSend"===e&&this.parseHandlers(l),void 0!==t.detail.xhr&&this.shouldIntercept(l)&&"htmx:beforeSend"===e){const e=t.detail.xhr;e.serverless={params:d,path:l},e.send=()=>{e.dispatchEvent(new Event("loadstart")),e.dispatchEvent(new Event("load")),e.dispatchEvent(new Event("loadend")),e.readyState,XMLHttpRequest.DONE},t.detail.shouldSwap=!0}}transformResponse(e,t,n){var s,r,o;const i=null!==(r=null===(s=null==t?void 0:t.serverless)||void 0===s?void 0:s.path)&&void 0!==r?r:"",l=null===(o=t.serverless)||void 0===o?void 0:o.params;if(this.shouldIntercept(i)){const s=this.handlers.get(i);return"function"==typeof s?s.call(n,e,l,t):s}return e}parseHandlers(e){if(e=null!=e?e:"",!this.handlers.has(e)&&e.startsWith("js:")){const t=e.replace(/js:|\(\)/g,"").trim();""!==t&&this.handlers.set(e,Function("return ("+t+")")())}}shouldIntercept(e){return this.handlers.has(null!=e?e:"")}}},607:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=new(s(n(967)).default);t.default=r}},t={},n=function n(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}(607);return n.default})()));